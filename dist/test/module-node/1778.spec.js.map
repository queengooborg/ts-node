{"version":3,"file":"1778.spec.js","sourceRoot":"","sources":["../../../src/test/module-node/1778.spec.ts"],"names":[],"mappings":";;AAAA,kDAA6C;AAC7C,wCAOoB;AACpB,wCAA6C;AAC7C,+BAA4B;AAE5B,MAAM,IAAI,GAAG,IAAA,yBAAU,EAAC;IACtB,GAAG,EAAE,kBAAQ;CACd,CAAC,CAAC;AAEH,MAAM,IAAI,GAAG,IAAA,iBAAO,EAAC,mBAAS,CAAC,CAAC;AAEhC,IAAI,CAAC,KAAK,CACR,2IAA2I,EAC3I,CAAC,IAAI,EAAE,EAAE;IACP,IAAI,CAAC,KAAK,CACR,8BAAoB;QAClB,0CAAgC;QAChC,wCAA8B,CACjC,CAAC;IACF,IAAI,CAAC,MAAM,EAAE,KAAK,IAAI,EAAE;QACtB,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,CAChC,GAAG,0CAAgC,aAAa,EAChD;YACE,GAAG,EAAE,IAAA,WAAI,EAAC,kBAAQ,EAAE,MAAM,CAAC;SAC5B,CACF,CAAC;QACF,IAAA,gBAAM,EAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvB,IAAA,gBAAM,EAAC,MAAM,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC;AACL,CAAC,CACF,CAAC","sourcesContent":["import { createExec } from '../exec-helpers';\nimport {\n  ctxTsNode,\n  nodeSupportsEsmHooks,\n  TEST_DIR,\n  tsSupportsStableNodeNextNode16,\n  CMD_TS_NODE_WITHOUT_PROJECT_FLAG,\n  nodeSupportsSpawningChildProcess,\n} from '../helpers';\nimport { context, expect } from '../testlib';\nimport { join } from 'path';\n\nconst exec = createExec({\n  cwd: TEST_DIR,\n});\n\nconst test = context(ctxTsNode);\n\ntest.suite(\n  'Issue #1778: typechecker resolver should take importer\\'s module type -- cjs or esm -- into account when resolving package.json \"exports\"',\n  (test) => {\n    test.runIf(\n      nodeSupportsEsmHooks &&\n        nodeSupportsSpawningChildProcess &&\n        tsSupportsStableNodeNextNode16\n    );\n    test('test', async () => {\n      const { err, stdout } = await exec(\n        `${CMD_TS_NODE_WITHOUT_PROJECT_FLAG} ./index.ts`,\n        {\n          cwd: join(TEST_DIR, '1778'),\n        }\n      );\n      expect(err).toBe(null);\n      expect(stdout).toBe('{ esm: true }\\n');\n    });\n  }\n);\n"]}